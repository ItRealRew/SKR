<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>STORAGES</title>

        <meta charset='UTF-8'></meta>

        <link rel="stylesheet" href="css/allPage.css"></link>
        <link rel="stylesheet" href="css/style.css"></link>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"></link>
    </h:head>
    <h:body>

        <header class="header">
            <img src="images/logo.png" class="logo"></img>
            <div class="menu">

                <div class="menu__icon">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>

                <h:form>
                    <div class="menu__links">
                        <a class=" menu__links-item enty">
                            <h:outputText value="#{loginBean.name}" />
                        </a>
                        <h:commandLink class="menu__links-item" action="#{loginBean.logout()}" value="Выход">
                        </h:commandLink>
                    </div>
                </h:form>
            </div>
        </header>


        <div class="cont">
            <h:form>
                <div class="fakeheadpage">
                    <div class="headpage"><i class="texheadtpage" title="Страница выбора нужного хранилища, создания нового, удаления или редактирования старого.">Storage</i>/<i class="textheadlink" title="Нажмите, что бы добавить новое хранилище"><a href="/SKR-war/faces/addStorage.xhtml">Создать</a></i>
                        <div class="a-wrapper" data-text="">

                            <h:commandLink action="#{searchBean.goSearch()}" value="GO">
                            </h:commandLink>

                        </div>
                        <div class="input-wrapper" data-text="">
                            <h:inputText a:placeholder="Search…" value="#{searchBean.searchSrt}"></h:inputText>
                        </div>
                    </div>
                </div>
            </h:form>

            <div class="fakecontent">
                <div class="content">

                    <h:form>
                        <h:dataTable value="#{storagesBean.viewStorages(loginBean.user)}" var="var" class="forma">
                            
                            <h:column>
                                <f:facet name="header"> Название </f:facet>
                                    #{var.name}
                            </h:column>
                            <h:column>

                                <f:facet name="header"> Состояние </f:facet>

                                #{var.blocked ? "Заблокированно" : "Активно"}

                            </h:column>

                            <h:column >
                                <f:facet name="header"> Выбрать </f:facet>
                                    <h:commandLink action="#{storagesBean.selectStorage(var.id)}" value="OK" rendered="#{!var.blocked}"/>
                            </h:column>

                            <h:column>
                                <f:facet name="header"> Удалить </f:facet>
                                <h:commandLink action="#{storagesBean.delStorage(var)}" value="OK">
                                </h:commandLink>
                            </h:column>

                            <h:column>
                                <f:facet name="header"> Редактировать </f:facet>
                                    <h:commandLink action="#{storagesBean.selectEditStorage(var.id)}" value="OK" rendered="#{!var.blocked}" />
                            </h:column>

                        </h:dataTable>



                    </h:form>

                    <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js'></script>
                    <script src="js/Menu.js"></script>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="contentFoter">StockRoom.2017-
                <script type="text/javascript">
                    var mdate = new Date();
                    document.write(mdate.getFullYear());

                </script>
            </div>
        </div>
    </h:body>

</html>
